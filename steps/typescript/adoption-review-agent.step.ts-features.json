[
  {
    "id": "api-configuration",
    "title": "API Configuration",
    "description": "Sets up a POST endpoint at /ts/pets/:id/adoption-review where staff can request AI-powered adoption readiness reviews.",
    "lines": ["10-17"]
  },
  {
    "id": "pet-validation",
    "title": "Pet Validation",
    "description": "Retrieves the pet and validates it's in the right status for adoption review (healthy or available).",
    "lines": ["28-51"]
  },
  {
    "id": "agent-context",
    "title": "Building Agent Context",
    "description": "Prepares all the pet information the AI needs to assess adoption readiness - profile completeness, flags, and current status.",
    "lines": ["53-54"]
  },
  {
    "id": "idempotency-check",
    "title": "Idempotency Check",
    "description": "Checks if we recently reviewed this pet with the same flags and status, returning the cached decision to avoid duplicate processing.",
    "lines": ["56-88"]
  },
  {
    "id": "ai-decision",
    "title": "AI Decision Call",
    "description": "Calls OpenAI to analyze the pet's profile and data completeness, choosing whether the pet needs more data or is ready for adoption.",
    "lines": ["90-98"]
  },
  {
    "id": "decision-validation",
    "title": "Decision Validation",
    "description": "Validates the AI's chosen emit and handles any errors from the AI decision process.",
    "lines": ["100-121"]
  },
  {
    "id": "emit-firing",
    "title": "Firing Chosen Emit",
    "description": "Fires the emit chosen by the AI agent, triggering the orchestrator to handle adoption readiness or data collection.",
    "lines": ["123-143"]
  },
  {
    "id": "response-formatting",
    "title": "Response Formatting",
    "description": "Returns a detailed response with the AI's decision, rationale, and artifact for tracking adoption decisions.",
    "lines": ["145-158"]
  },
  {
    "id": "error-handling",
    "title": "Error Handling",
    "description": "Catches and logs any errors during the adoption review, providing helpful error messages.",
    "lines": ["160-177"]
  }
]
